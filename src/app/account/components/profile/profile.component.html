<div class="flex flex-col">
    <h1 class="text-xl sm:text-3xl font-semibold text-primary dark:text-secondary mb-4">Perfil</h1>

    <div class="flex mx-auto items-center relative mb-6">
        <div (click)="toggleProfilePhoto()" class="flex">
            <img src="assets/images/avatar/Avatar.png" 
                alt="Profile photo"
                class="flex w-40 h-40 transition-opacity duration-300 ease-in-out hover:opacity-50 shadow-lg"
            >
            <div class="cursor-pointer absolute inset-0 flex items-center justify-center transition-opacity duration-300 ease-in-out opacity-0 hover:opacity-100 bg-black bg-opacity-50">
                <span class="text-white text-lg">Cambiar foto</span>
            </div>
        </div>
    </div>

    <div class="w-full max-w-2xl mx-auto px-8">
        <hr class="text-gray-200 dark:text-gray-700 w-full my-4">

        <h2 class="text-3xl text-center font-semibold text-primary dark:text-secondary mb-4">Información personal</h2>
        <app-personal-information />

        <hr class="text-gray-200 dark:text-gray-700 w-full my-4">

        <div class="accordion">
            <div (click)="toggleAccordion('accordion_1')" class="cursor-pointer flex items-center text-2xl text-center font-semibold text-primary dark:text-secondary hover:text-blue-600 dark:hover:text-blue-600 mb-4">
                <h2>Cambiar contraseña</h2>
                <span class="material-icons ml-auto">{{ isAccordion1Open ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}</span>
            </div>

            <div [ngClass]="{'max-h-[500px] opacity-100 overflow-visible': isAccordion1Open, 'max-h-0 opacity-0 overflow-hidden': !isAccordion1Open}" class="transition-all duration-500 space-y-2 overflow-hidden">
                <app-change-password />
            </div>
        </div>

        <hr class="text-gray-200 dark:text-gray-700 w-full my-4">

        <div class="accordion">
            <div (click)="toggleAccordion('accordion_2')" class="cursor-pointer flex items-center text-2xl text-center font-semibold text-primary dark:text-secondary hover:text-blue-600 dark:hover:text-blue-600 mb-4">
                <h2>Información de correspondencia</h2>
                <span class="material-icons ml-auto">{{ isAccordion2Open ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}</span>
            </div>

            <div [ngClass]="{'max-h-[500px] opacity-100': isAccordion2Open, 'max-h-0 opacity-0': !isAccordion2Open}" class="transition-all duration-500 overflow-hidden space-y-2">
                <app-shipping-information />
            </div>
        </div>

        <hr class="text-gray-200 dark:text-gray-700 w-full my-4">
    </div>

    @if(isUploadAvatar) {
        <div class="flex fixed inset-0 z-0 items-center justify-center p-4 bg-gray-900 bg-opacity-80">
            <div class="relative w-full max-w-md p-9 bg-white dark:bg-gray-950 shadow-lg dark:border dark:border-gray-700">
                <h1 class="text-center text-3xl sm:text-2xl font-semibold mb-4 text-primary dark:text-secondary">Foto de perfil</h1>

                <button type="button" (click)="toggleProfilePhoto()" class="absolute top-0 right-0 mt-4 mr-4 text-primary dark:text-white hover:text-red-500 dark:hover:text-red-500 w-6 h-6 transition duration-200">
                    <span class="material-icons text-2xl font-bold">close</span>
                </button>

                <div id="dropZone"
                    (dragover)="onDragOver($event)"
                    (dragleave)="onDragLeave($event)"
                    (drop)="onDrop($event)"
                    [ngClass]="{'
                        border-primary bg-gray-100 dark:bg-gray-800': isDragOver, 'bg-white dark:bg-gray-900': !isDragOver
                    }"
                    class="text-center border-dashed border-2 border-gray-300 transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md"
                >
                    <label for="fileInput" class="cursor-pointer flex flex-col items-center space-y-2 p-8">
                        <span class="material-icons text-8xl text-black dark:text-white">add</span>
                        <span class="text-black dark:text-white">¡Arrasta y pega tu imagen aquí!</span>
                        <span class="text-gray-500 text-sm">(O da clic para seleccionar tu archivo)</span>
                    </label>
                    <input type="file" id="fileInput" class="hidden" (change)="onFileSelected($event)" accept="image/png, image/jpeg, image/jpg, image/webp"> <!--multiple-->
                </div>
                <!-- <div class="mt-6 text-center" id="fileList"></div> -->
                @if(errorFileMessage) {
                    <div class="mt-4 text-center text-red-500">
                        {{ errorFileMessage }}
                    </div>
                }
            </div>
        </div>
    }
</div>